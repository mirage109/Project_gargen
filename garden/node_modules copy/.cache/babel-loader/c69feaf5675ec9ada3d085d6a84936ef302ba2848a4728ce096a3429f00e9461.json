{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nexport const useProductFilter = initialData => {\n  _s();\n  const [showDiscounted, setShowDiscounted] = useState(false);\n  const [sortOption, setSortOption] = useState(\"Default\");\n  const [fromPrice, setFromPrice] = useState(\"\");\n  const [toPrice, setToPrice] = useState(\"\");\n  const {\n    data\n  } = initialData;\n  const discountedProducts = data.filter(el => el.discont_price !== null);\n  const sortByPriceAscending = products => {\n    return products.slice().sort((a, b) => {\n      const priceA = a.discont_price !== null ? a.discont_price : a.price;\n      const priceB = b.discont_price !== null ? b.discont_price : b.price;\n      return priceA - priceB;\n    });\n  };\n  const sortByPriceDescending = products => {\n    return products.slice().sort((a, b) => {\n      const priceA = a.discont_price !== null ? a.discont_price : a.price;\n      const priceB = b.discont_price !== null ? b.discont_price : b.price;\n      return priceB - priceA;\n    });\n  };\n  const filterProductsByPrice = products => {\n    return products.filter(product => {\n      const price = product.discont_price !== null ? product.discont_price : product.price;\n      const from = fromPrice === \"\" ? Number.MIN_SAFE_INTEGER : parseInt(fromPrice);\n      const to = toPrice === \"\" ? Number.MAX_SAFE_INTEGER : parseInt(toPrice);\n      return price >= from && price <= to;\n    });\n  };\n  const priceFilteredProducts = filterProductsByPrice(data);\n\n  // Сортируем продукты, отфильтрованные по цене, на основе sortOption\n  let sortedProducts = sortOption === \"Ascending\" ? sortByPriceAscending(priceFilteredProducts) : sortOption === \"Descending\" ? sortByPriceDescending(priceFilteredProducts) : priceFilteredProducts;\n\n  // Применяем фильтр по скидке, если showDiscounted равно true\n  const filteredProducts = showDiscounted ? discountedProducts : sortedProducts;\n  return {\n    showDiscounted,\n    setShowDiscounted,\n    sortOption,\n    setSortOption,\n    fromPrice,\n    setFromPrice,\n    toPrice,\n    setToPrice,\n    filteredProducts,\n    discountedProducts\n  };\n};\n_s(useProductFilter, \"v/0M/BvIGxKznyJYFJ0YPGr2MSw=\");","map":{"version":3,"names":["useState","useProductFilter","initialData","_s","showDiscounted","setShowDiscounted","sortOption","setSortOption","fromPrice","setFromPrice","toPrice","setToPrice","data","discountedProducts","filter","el","discont_price","sortByPriceAscending","products","slice","sort","a","b","priceA","price","priceB","sortByPriceDescending","filterProductsByPrice","product","from","Number","MIN_SAFE_INTEGER","parseInt","to","MAX_SAFE_INTEGER","priceFilteredProducts","sortedProducts","filteredProducts"],"sources":["D:/Project_java/Project_garden/garden/src/redux/useProductFilter.js"],"sourcesContent":["import { useState } from \"react\";\r\n\r\nexport const useProductFilter = (initialData) => {\r\n  const [showDiscounted, setShowDiscounted] = useState(false);\r\n  const [sortOption, setSortOption] = useState(\"Default\");\r\n  const [fromPrice, setFromPrice] = useState(\"\");\r\n  const [toPrice, setToPrice] = useState(\"\");\r\n  const { data } = initialData;\r\n\r\n  const discountedProducts = data.filter((el) => el.discont_price !== null);\r\n\r\n  const sortByPriceAscending = (products) => {\r\n    return products.slice().sort((a, b) => {\r\n      const priceA = a.discont_price !== null ? a.discont_price : a.price;\r\n      const priceB = b.discont_price !== null ? b.discont_price : b.price;\r\n      return priceA - priceB;\r\n    });\r\n  };\r\n\r\n  const sortByPriceDescending = (products) => {\r\n    return products.slice().sort((a, b) => {\r\n      const priceA = a.discont_price !== null ? a.discont_price : a.price;\r\n      const priceB = b.discont_price !== null ? b.discont_price : b.price;\r\n      return priceB - priceA;\r\n    });\r\n  };\r\n\r\n  const filterProductsByPrice = (products) => {\r\n    return products.filter((product) => {\r\n      const price =\r\n        product.discont_price !== null ? product.discont_price : product.price;\r\n      const from =\r\n        fromPrice === \"\" ? Number.MIN_SAFE_INTEGER : parseInt(fromPrice);\r\n      const to = toPrice === \"\" ? Number.MAX_SAFE_INTEGER : parseInt(toPrice);\r\n      return price >= from && price <= to;\r\n    });\r\n  };\r\n\r\n  const priceFilteredProducts = filterProductsByPrice(data);\r\n\r\n  // Сортируем продукты, отфильтрованные по цене, на основе sortOption\r\n  let sortedProducts = sortOption === \"Ascending\"\r\n    ? sortByPriceAscending(priceFilteredProducts)\r\n    : sortOption === \"Descending\"\r\n    ? sortByPriceDescending(priceFilteredProducts)\r\n    : priceFilteredProducts;\r\n\r\n  // Применяем фильтр по скидке, если showDiscounted равно true\r\n  const filteredProducts = showDiscounted\r\n    ? discountedProducts\r\n    : sortedProducts;\r\n\r\n  return {\r\n    showDiscounted,\r\n    setShowDiscounted,\r\n    sortOption,\r\n    setSortOption,\r\n    fromPrice,\r\n    setFromPrice,\r\n    toPrice,\r\n    setToPrice,\r\n    filteredProducts,\r\n    discountedProducts,\r\n  };\r\n};\r\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAEhC,OAAO,MAAMC,gBAAgB,GAAIC,WAAW,IAAK;EAAAC,EAAA;EAC/C,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGL,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACM,UAAU,EAAEC,aAAa,CAAC,GAAGP,QAAQ,CAAC,SAAS,CAAC;EACvD,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM;IAAEY;EAAK,CAAC,GAAGV,WAAW;EAE5B,MAAMW,kBAAkB,GAAGD,IAAI,CAACE,MAAM,CAAEC,EAAE,IAAKA,EAAE,CAACC,aAAa,KAAK,IAAI,CAAC;EAEzE,MAAMC,oBAAoB,GAAIC,QAAQ,IAAK;IACzC,OAAOA,QAAQ,CAACC,KAAK,CAAC,CAAC,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MACrC,MAAMC,MAAM,GAAGF,CAAC,CAACL,aAAa,KAAK,IAAI,GAAGK,CAAC,CAACL,aAAa,GAAGK,CAAC,CAACG,KAAK;MACnE,MAAMC,MAAM,GAAGH,CAAC,CAACN,aAAa,KAAK,IAAI,GAAGM,CAAC,CAACN,aAAa,GAAGM,CAAC,CAACE,KAAK;MACnE,OAAOD,MAAM,GAAGE,MAAM;IACxB,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,qBAAqB,GAAIR,QAAQ,IAAK;IAC1C,OAAOA,QAAQ,CAACC,KAAK,CAAC,CAAC,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MACrC,MAAMC,MAAM,GAAGF,CAAC,CAACL,aAAa,KAAK,IAAI,GAAGK,CAAC,CAACL,aAAa,GAAGK,CAAC,CAACG,KAAK;MACnE,MAAMC,MAAM,GAAGH,CAAC,CAACN,aAAa,KAAK,IAAI,GAAGM,CAAC,CAACN,aAAa,GAAGM,CAAC,CAACE,KAAK;MACnE,OAAOC,MAAM,GAAGF,MAAM;IACxB,CAAC,CAAC;EACJ,CAAC;EAED,MAAMI,qBAAqB,GAAIT,QAAQ,IAAK;IAC1C,OAAOA,QAAQ,CAACJ,MAAM,CAAEc,OAAO,IAAK;MAClC,MAAMJ,KAAK,GACTI,OAAO,CAACZ,aAAa,KAAK,IAAI,GAAGY,OAAO,CAACZ,aAAa,GAAGY,OAAO,CAACJ,KAAK;MACxE,MAAMK,IAAI,GACRrB,SAAS,KAAK,EAAE,GAAGsB,MAAM,CAACC,gBAAgB,GAAGC,QAAQ,CAACxB,SAAS,CAAC;MAClE,MAAMyB,EAAE,GAAGvB,OAAO,KAAK,EAAE,GAAGoB,MAAM,CAACI,gBAAgB,GAAGF,QAAQ,CAACtB,OAAO,CAAC;MACvE,OAAOc,KAAK,IAAIK,IAAI,IAAIL,KAAK,IAAIS,EAAE;IACrC,CAAC,CAAC;EACJ,CAAC;EAED,MAAME,qBAAqB,GAAGR,qBAAqB,CAACf,IAAI,CAAC;;EAEzD;EACA,IAAIwB,cAAc,GAAG9B,UAAU,KAAK,WAAW,GAC3CW,oBAAoB,CAACkB,qBAAqB,CAAC,GAC3C7B,UAAU,KAAK,YAAY,GAC3BoB,qBAAqB,CAACS,qBAAqB,CAAC,GAC5CA,qBAAqB;;EAEzB;EACA,MAAME,gBAAgB,GAAGjC,cAAc,GACnCS,kBAAkB,GAClBuB,cAAc;EAElB,OAAO;IACLhC,cAAc;IACdC,iBAAiB;IACjBC,UAAU;IACVC,aAAa;IACbC,SAAS;IACTC,YAAY;IACZC,OAAO;IACPC,UAAU;IACV0B,gBAAgB;IAChBxB;EACF,CAAC;AACH,CAAC;AAACV,EAAA,CA9DWF,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}