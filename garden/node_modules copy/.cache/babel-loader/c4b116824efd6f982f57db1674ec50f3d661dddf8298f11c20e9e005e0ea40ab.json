{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nexport const useProductFilter = initialData => {\n  _s();\n  const [showDiscounted, setShowDiscounted] = useState(false);\n  const [sortOption, setSortOption] = useState(\"Default\");\n  const [fromPrice, setFromPrice] = useState(\"\");\n  const [toPrice, setToPrice] = useState(\"\");\n  const {\n    data\n  } = initialData;\n  const [filteredData, setFilteredData] = useState(data);\n  const [discountedProducts, setDiscountedProducts] = useState([]);\n  useEffect(() => {\n    // Фильтруем данные и обновляем filteredData\n    const filtered = data.filter(product => {\n      const price = product.discont_price !== null ? product.discont_price : product.price;\n      const from = fromPrice === \"\" ? Number.MIN_SAFE_INTEGER : parseInt(fromPrice);\n      const to = toPrice === \"\" ? Number.MAX_SAFE_INTEGER : parseInt(toPrice);\n      return price >= from && price <= to;\n    });\n\n    // Обновляем отфильтрованные продукты\n    setFilteredData(filtered);\n\n    // Обновляем discountedProducts только если showDiscounted === true\n    if (showDiscounted) {\n      const discounted = data.filter(product => product.discont_price !== null);\n      setDiscountedProducts(discounted);\n    }\n  }, [data, showDiscounted, fromPrice, toPrice]);\n  const sortByPriceAscending = products => {\n    return products.slice().sort((a, b) => {\n      const priceA = a.discont_price !== null ? a.discont_price : a.price;\n      const priceB = b.discont_price !== null ? b.discont_price : b.price;\n      return priceA - priceB;\n    });\n  };\n  const sortByPriceDescending = products => {\n    return products.slice().sort((a, b) => {\n      const priceA = a.discont_price !== null ? a.discont_price : a.price;\n      const priceB = b.discont_price !== null ? b.discont_price : b.price;\n      return priceB - priceA;\n    });\n  };\n  const sortedProducts = sortOption === \"Ascending\" ? sortByPriceAscending(filteredData) : sortOption === \"Descending\" ? sortByPriceDescending(filteredData) : filteredData;\n  return {\n    showDiscounted,\n    setShowDiscounted,\n    sortOption,\n    setSortOption,\n    fromPrice,\n    setFromPrice,\n    toPrice,\n    setToPrice,\n    filteredProducts: sortedProducts,\n    discountedProducts\n  };\n};\n_s(useProductFilter, \"Gas6JwLbFCD7Io5aHu7xkol9EHA=\");","map":{"version":3,"names":["useState","useEffect","useProductFilter","initialData","_s","showDiscounted","setShowDiscounted","sortOption","setSortOption","fromPrice","setFromPrice","toPrice","setToPrice","data","filteredData","setFilteredData","discountedProducts","setDiscountedProducts","filtered","filter","product","price","discont_price","from","Number","MIN_SAFE_INTEGER","parseInt","to","MAX_SAFE_INTEGER","discounted","sortByPriceAscending","products","slice","sort","a","b","priceA","priceB","sortByPriceDescending","sortedProducts","filteredProducts"],"sources":["D:/Project_java/Project_garden/garden/src/redux/useProductFilter.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nexport const useProductFilter = (initialData) => {\r\n  const [showDiscounted, setShowDiscounted] = useState(false);\r\n  const [sortOption, setSortOption] = useState(\"Default\");\r\n  const [fromPrice, setFromPrice] = useState(\"\");\r\n  const [toPrice, setToPrice] = useState(\"\");\r\n  const { data } = initialData;\r\n\r\n  const [filteredData, setFilteredData] = useState(data);\r\n  const [discountedProducts, setDiscountedProducts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Фильтруем данные и обновляем filteredData\r\n    const filtered = data.filter((product) => {\r\n      const price =\r\n        product.discont_price !== null ? product.discont_price : product.price;\r\n      const from =\r\n        fromPrice === \"\" ? Number.MIN_SAFE_INTEGER : parseInt(fromPrice);\r\n      const to = toPrice === \"\" ? Number.MAX_SAFE_INTEGER : parseInt(toPrice);\r\n      return price >= from && price <= to;\r\n    });\r\n\r\n    // Обновляем отфильтрованные продукты\r\n    setFilteredData(filtered);\r\n\r\n    // Обновляем discountedProducts только если showDiscounted === true\r\n    if (showDiscounted) {\r\n      const discounted = data.filter((product) => product.discont_price !== null);\r\n      setDiscountedProducts(discounted);\r\n    }\r\n  }, [data, showDiscounted, fromPrice, toPrice]);\r\n\r\n  const sortByPriceAscending = (products) => {\r\n    return products.slice().sort((a, b) => {\r\n      const priceA = a.discont_price !== null ? a.discont_price : a.price;\r\n      const priceB = b.discont_price !== null ? b.discont_price : b.price;\r\n      return priceA - priceB;\r\n    });\r\n  };\r\n\r\n  const sortByPriceDescending = (products) => {\r\n    return products.slice().sort((a, b) => {\r\n      const priceA = a.discont_price !== null ? a.discont_price : a.price;\r\n      const priceB = b.discont_price !== null ? b.discont_price : b.price;\r\n      return priceB - priceA;\r\n    });\r\n  };\r\n\r\n  const sortedProducts =\r\n    sortOption === \"Ascending\"\r\n      ? sortByPriceAscending(filteredData)\r\n      : sortOption === \"Descending\"\r\n      ? sortByPriceDescending(filteredData)\r\n      : filteredData;\r\n\r\n  return {\r\n    showDiscounted,\r\n    setShowDiscounted,\r\n    sortOption,\r\n    setSortOption,\r\n    fromPrice,\r\n    setFromPrice,\r\n    toPrice,\r\n    setToPrice,\r\n    filteredProducts: sortedProducts,\r\n    discountedProducts,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}